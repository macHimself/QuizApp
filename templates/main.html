{% extends "base.html" %}

{% block title %}ğŸ§  SprÃ¡va okruhÅ¯{% endblock %}

{% block content %}
  <h2>ğŸ§  TematickÃ© okruhy</h2>

  {% if topics %}
    <ul style="list-style-type: none; padding: 0;">
      {% for topic in topics %}
        <li style="margin: 1em 0; border: 1px solid #ddd; border-radius: 8px; padding: 1em; background: #fefefe; text-align: left;">
          <strong style="font-size: 1.2em;">{{ topic.name }}</strong><br>
          <small>ğŸ“Œ OtÃ¡zek celkem: {{ topic.total }} &nbsp; âœ… HotovÃ½ch: {{ topic.done }}</small><br><br>
          <a href="{{ url_for('quiz', topic=topic.name) }}">ğŸ¯ ZaÄÃ­t test</a> |
          <a href="{{ url_for('add_questions', topic=topic.name) }}">â• PÅ™idat otÃ¡zky</a> |
          <form method="post" action="{{ url_for('reset_topic') }}" style="display:inline;" onsubmit="return confirm('Resetovat otÃ¡zky v okruhu {{ topic.name }}?');">
            <input type="hidden" name="topic" value="{{ topic.name }}">
            <button type="submit" style="background:none; border:none; color:#0066cc; cursor:pointer;" title="Reset okruhu">
              ğŸ”„ Reset
            </button>
          </form>

          <form method="post" action="{{ url_for('delete_topic') }}" style="display:inline;" onsubmit="return confirm('Opravdu smazat okruh \'{{ topic.name }}\'?');">
            <input type="hidden" name="topic" value="{{ topic.name }}">
            <button type="submit" title="Smazat" style="background:none; border:none; color:#d00; cursor:pointer;">ğŸ—‘ï¸</button>
          </form>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>âš ï¸ ZatÃ­m nejsou vytvoÅ™eny Å¾Ã¡dnÃ© okruhy.</p>
  {% endif %}

  <hr>
  <h3>â• VytvoÅ™it novÃ½ okruh</h3>
  <form method="post" action="{{ url_for('create_topic') }}">
    <input type="text" name="topic" placeholder="NapÅ™. XSS, TLS, WEP..." required>
    <button type="submit">ğŸ“ VytvoÅ™it</button>
  </form>

  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <ul style="margin-top: 1em; color: #007700;">
        {% for message in messages %}
          <li>{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}
{% endblock %}