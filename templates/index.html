{% extends "base.html" %}

{% block content %}
  <h2 class="question">ğŸ§  OtÃ¡zka:</h2>
  <p>{{ question }}</p>

  {% if answer %}
    <div id="reveal-button">
      <button onclick="showAnswer()">ğŸ‘ï¸ Zobrazit odpovÄ›Ä</button>
    </div>
    <div id="answer-block" style="display: none;">
      <h3 style="color: green;">âœ… OdpovÄ›Ä:</h3>
      <div class="answer">{{ answer }}</div>
    </div>
  {% endif %}

  <div>
    <label for="rating">ğŸ§  Jak jsi to vÄ›dÄ›l? Vyber ÄÃ­slo:</label>
    <form method="post">
      <input type="hidden" name="index" value="{{ index }}">
      <div class="score-buttons">
          <button name="rating" value="-1" style="background:#f8d7da; color:#721c24;">-1</button>
          {% for i in range(11) %}
            <button name="rating" value="{{ i }}">{{ i }}</button>
          {% endfor %}
      </div>
    </form>
  </div>

  <div class="footer">
    <p>ğŸ“š OtÃ¡zek celkem: <strong>{{ total }}</strong></p>
    <p>âœ… DokonÄeno (hodnoceno 10): <strong>{{ done }}</strong></p>
    <p>ğŸ“Š PrÅ¯mÄ›rnÃ© skÃ³re: 
      {% if avg_score is not none %}
        <strong>{{ avg_score }}</strong>
      {% else %}
        <em>zatÃ­m Å¾Ã¡dnÃ© odpovÄ›di</em>
      {% endif %}
    </p>
    <p style="color: {% if pending_count > 0 %}#d9534f{% else %}#28a745{% endif %};">
      â“ NezodpovÄ›zenÃ©: <strong>{{ pending_count }}</strong>
    </p>
    <p>ğŸš« VyÅ™azeno (hodnoceno -1): {{ excluded_count }}</p>
    <div class="progress-bar" style="display: flex; width: 100%; height: 12px; border-radius: 8px; overflow: hidden; background: #eee;">
      {% for segment in progress_segments %}
        <div style="width: {{ segment.width }}%; background: {{ segment.color }};"
             title="Hodnota {{ segment.value }}: {{ segment.count }} otÃ¡zek">
        </div>
      {% endfor %}
    </div>
  </div>
{% endblock %}